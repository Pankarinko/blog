<p><link rel="stylesheet" href="blog.css" />
<link rel="stylesheet" media="screen" href="https://fontlibrary.org//face/neomatrixcode" type="text/css"/></p>
<h1 id="chapter-two">Chapter Two</h1>
<h2 id="uart">UART</h2>
<p>First off, it really wasntâ€™t that easy to find material on UART. I
made everything using <a
href="https://www.lammertbies.nl/comm/info/serial-uart">this blog</a>
and <a href="http://byterunner.com/16550.html">this data sheet</a>. Here
I will summerize, which parts of these I needed.</p>
<h3 id="why-do-i-use-uart">Why do I use UART?</h3>
<p>For programming an operating system, I need to be able to communicate
with it. For that, I need some form of output. Without output it is
really hard to debug anything, so I dealt with this problem first. UART
is a protocol for communication between devices. Since I use QEMU as my
RISCV emulator and QEMU already supports UART, I just use UART as well.
Besides, UART is less complicated to implement than other communication
protocols.</p>
<h3 id="what-i-did">What I did</h3>
<p>UART operates with the 8 registers, found in this table:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Address</th>
<th style="text-align: left;">Read</th>
<th style="text-align: left;">Write</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">base</td>
<td style="text-align: left;">RBR receiver buffer</td>
<td style="text-align: left;">THR transmitter holding</td>
</tr>
<tr class="even">
<td style="text-align: left;">base+1</td>
<td style="text-align: left;">IER interrupt enable</td>
<td style="text-align: left;">IER interrupt enable</td>
</tr>
<tr class="odd">
<td style="text-align: left;">base+2</td>
<td style="text-align: left;">IIR interrupt identification</td>
<td style="text-align: left;">FCR FIFO control</td>
</tr>
<tr class="even">
<td style="text-align: left;">base+3</td>
<td style="text-align: left;">LCR line control</td>
<td style="text-align: left;">LCR line control</td>
</tr>
<tr class="odd">
<td style="text-align: left;">base+4</td>
<td style="text-align: left;">MCR modem control</td>
<td style="text-align: left;">MCR modem control</td>
</tr>
<tr class="even">
<td style="text-align: left;">base+5</td>
<td style="text-align: left;">LSR line status</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="odd">
<td style="text-align: left;">base+6</td>
<td style="text-align: left;">MSR modem status</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;">base+7</td>
<td style="text-align: left;">SCR scratch</td>
<td style="text-align: left;">SCR scratch</td>
</tr>
</tbody>
</table>
<p>To access the registers, I need to know the base address of the
UART-area in my</p>
